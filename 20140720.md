# 阿里前端学习笔记（二） #

**2014-07-20** by niuzhixiang

## Kissy ##

### Hello World ###

- 引入Kissy种子文件
		
		<script src="http://g.tbcdn.cn/kissy/k/1.4.4/seed.js"></script>

- 添加一个Kissy模块
		
		//此处省略模块名称，默认为该模块所在JS文件名。建议采用此写法，一个JS文件中只定义一个模块
		//回调函数的第一个参数为KISSY本身；第二个参数为Base模块，与requires数组中指定的“base”相对应
		KISSY.add(function(S,Base) {

			//HelloWorld就是该模块类，它继承自Base模块（类）
			var HelloWorld = Base.extend({
				initializer:function(){
					var self = this;
					// Your Code
					alert('hello world');
				}
			},{
				ATTRS: {
					// 这里是初始参数和默认值
					A:{
						value:'abc'
					}
				}
			});
		
			//返回HelloWorld类
			return HelloWorld;
			
		},{
			//声明该模块依赖的其他模块
			requires:['base']	
		});

- 使用这个Kissy模块
		
		//使用模块时需指定模块名称
		KISSY.use('h5-2banner-active/mods/banner/index',function(S,Banner){
			//创建HelloWorld模块的实例，会执行initializer()方法。			
			new HelloWorld();
		});

### Kissy的特性 ###

- 高度模块化。通过KISSY.add()注册一个模块，通过KISSY.use()使用一个模块，便于KISSY组件的重用。
- 很多API与jQuery类似。

### Kissy常用模块 ###

- Seed模块：内置于种子文件Seed中，包括基础的面向对象支持、模块加载器（loader模块）、UA特性检测（UA模块）、全局工具函数（lang模块）等核心的功能。
- Components模块：包含一些比较常用的模块，例如动画效果（anim模块）、DOM节点操作（dom和node模块，其中后者继承自前者，进行了进一步的封装）、AJAX（io模块）、事件机制（event模块）等。
- Widgets模块：由官方或非官方提供的其他组件模块。

### 参考资料 ###

更多关于Kissy的内容参见 [Kissy官方网站](http://docs.kissyui.com/) 

## Juicer ##

### 简介 ###

Juicer是一个轻量级的JS模板引擎。它将数据和模板分离，通过把数据渲染到模板来生成最终的HTML片段。Juicer可以在NodeJS环境中运行。

### Demo ###
	
	<!--数据-->
	<!--#def
		{
			"tmsTitle": "LOGO",
			"title": "测试图片",
			"href": "http://gtms01.alicdn.com/tps/i1/T1QBDWFXxcXXXzCwr6-168-170.png"
		}
	-->
	
	<!--模板-->
	图片地址: ${title} <br />
	链接地址: ${href}
	
	<!--数据-->
	<!--#def
		{
			"list": [
				{
					"qt": "机票分会场",
					"dz": "http://trip.taobao.com/jipiao"
				},
				{
					"qt": "酒店分会场",
					"dz": "http://trip.taobao.com/jiudian"
				},
				{
					"qt": "度假分会场",
					"dz": "http://trip.taobao.com/dujia"
				}
			],
			"tmsTitle": "分会场列表"
		}
	-->
	<!--模板，使用了循环语法-->
	<ul class="other-link">
		{@each list as item}
			<li class="other-link-item"><a href="${item.dz}" target="_blank">${item.qt}</a></li>
		{@/each}
	</ul>

经过grunt-tpl-compiler编译后生成的HTML代码（遵循Kissy模块规范）为：
	
	<!--第一段数据和模板渲染出来的HTML代码-->
	图片地址: 测试图片
	<br />链接地址: http://gtms01.alicdn.com/tps/i1/T1QBDWFXxcXXXzCwr6-168-170.png
	
	<!--第二段数据和模板渲染出来的HTML代码-->
	<ul class="other-link">
	    <li class="other-link-item">
	        <a href="http://trip.taobao.com/jipiao" target="_blank">机票分会场</a>
	    </li>
	    <li class="other-link-item">
	        <a href="http://trip.taobao.com/jiudian" target="_blank">酒店分会场</a>
	    </li>
	    <li class="other-link-item">
	        <a href="http://trip.taobao.com/dujia" target="_blank">度假分会场</a>
	    </li>
	</ul>

### 参考资料 ###

[Juicer官方网站](http://juicer.name/)

## Less ##

### 简介 ###

Less是一个CSS预编译器，它是原生CSS语言的扩展，添加了诸如变量、函数、运算、规则嵌套等新功能。Less可以在NodeJS环境中运行。

### Demo ###

Less代码：
	
	/*此处声明一个变量base*/
	@base: #f938ab;

	/*此处自定义了一个函数，如果第二个参数是一个颜色值，则调用该函数*/
	.box-shadow(@style, @c) when (iscolor(@c)) {
	  -webkit-box-shadow: @style @c;
	  box-shadow:         @style @c;
	}
	/*此处又自定义了一个同名的函数，如果第二个参数是一个数字，则调用该函数。该函数首先
		将第二个参数（alpha值）转换成rgba颜色值，然后再调用上面那个自定义函数*/
	.box-shadow(@style, @alpha: 50%) when (isnumber(@alpha)) {
	  .box-shadow(@style, rgba(0, 0, 0, @alpha));
	}
	.box {
	  /*此处使用了一个内置函数saturate()，用于增加一定数值的颜色饱和度。Less中提供了
	    大量这种很有用的函数*/
	  color: saturate(@base, 5%);
	  /*此处使用了一个内置函数lighten()，用于增加一定数值的颜色亮度。*/
	  border-color: lighten(@base, 30%);
	  /*此处使用了规则的嵌套，在.box规则中嵌套了一个div规则，并且在div规则中使用了自定
		义的函数，由于第二个参数是一个数字值而非颜色值，因此调用的是第二个自定义函数*/
	  div { .box-shadow(0 0 5px, 30%) }
	}

编译后的CSS代码：

	.box {
	  color: #fe33ac;
	  border-color: #fdcdea;
	}
	.box div {
	  -webkit-box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
	  box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
	}

### 参考资料 ###

[Less CSS 官方网站](http://lesscss.net/)

## 航旅桥协议 ##

### 简介 ###

- 航旅桥协议是由航旅客户端工程师开发的一套标准协议，用于H5页面与native代码的通信。在Bridge JS文件中实现了这套桥协议。
- 协议一共有三类，page://、native://和bridge://。其中page协议用于H5与native页面之间的跳转；native协议用于H5页面与native代码的数据交换（例如通过本地代码获取地理位置数据）；bridge协议包含除page和native外的其他所有协议（例如获取手机网络连接情况、响铃及振动情况等）。
- 桥协议JS文件（Bridge项目下的index.js）的核心API是pushBack()方法，各个协议的实现方法都调用了pushBack()方法。

### 参考资料 ###

详见阿里航旅前端Wiki页面。

## NodeJS ##



## Web前端安全 ##

## 杂七杂八 ##

### markdown ###
### 抓包工具 ###
### 问题解决 ###
### 心得体会 ###